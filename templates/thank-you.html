{% extends 'layouts/_base.html' %}
{% from 'components/panel/_macro.njk' import onsPanel %}
{% from "components/metadata/_macro.njk" import onsMetadata %}

{% set page_title = _("Weâ€™ve received your answers") %}
{% set hide_sign_out_button = content.hide_sign_out_button %}

{% block main %}

  {% call onsPanel({
    "type": "success",
    "icon": "check",
    "iconSize": "xl",
    "classes": "u-mb-m"
    })
  %}
    <h1 data-qa="title">{{ _("Thank you for completing the {survey_title}").format(
      survey_title = survey_title)}}</h1>
    <p data-qa="guidance">
      {{ content.submission_text }}
    </p>
      {{ onsMetadata(content.metadata)}}
  {% endcall %}

  {% if content.guidance %}
    {% set contents = content.guidance.contents %}
    {% include 'partials/contents.html' %}
  {% else %}
    <p class="u-mb-s">{{ _("Your answers will be processed in the next few weeks.") }}
    {{ _("We may contact you to query your answers via phone or secure message.") }}</p>
    <p class="u-mb-s">{{ _("For more information on how we use this data.") }}<br>
    <a href="https://www.ons.gov.uk/surveys">https://www.ons.gov.uk/surveys</a></p>
  {% endif %}

  {% if content.view_submitted_response.enabled %}
    <h1 data-qa="view-answers-title">{{ _("Get a copy of your answers") }}</h1>
    {% if not content.view_submitted_response.expired %}
      <p class="u-mb-s">{{ _("You can <a href='{url}' id='view-answers-link'>save or print your answers</a> for your records.").format(url = content.view_submitted_response.url) }}</p>
      {% call onsPanel({
        "id": "view-submitted-warning",
        "type": "warn"
      }) %}
        <p>{{ _("For security your answers will only be available to view for 45 minutes") }}</p>
      {% endcall %}
    {% else %}
      {% call onsPanel({
        "id": "view-submitted-guidance",
        "classes": "u-mb-m"
      }) %}
        {{ _("For security, you can no longer view your answers") }}
      {% endcall %}
    {% endif %}
  {% endif %}

{% endblock %}
