{% from "components/summary/_macro.njk" import onsSummary %}

{% if list.editable %}
  {% if related_answers and answer_title %}
    {% set rows = map_list_collector_config(
      list.list_items,
      None,
      _("Change"),
      _("Change details for {item_name}"),
      _("Remove"),
      _("Remove {item_name}"),
      related_answers,
      answer_title
    ) %}
  {% else %}
    {% set rows = map_list_collector_config(
      list.list_items,
      Person,
      _("Change"),
      _("Change details for {item_name}"),
      _("Remove"),
      _("Remove {item_name}")
    ) %}
  {% endif %}
{% else %}
  {% set rows = map_list_collector_config(
    list.list_items,
    "person"
  ) %}
{% endif %}

{% set group_config = {
  "groupTitle": list_title,
  "rows": rows,
  "placeholderText": empty_list_text,
} %}

{% if add_link %}
  {% set group_config = group_config | setAttribute("summaryLink", {
    "url": add_link,
    "text": add_link_text,
    "attributes": {
      "data-qa": "add-item-link"
    }
  }) %}
{% endif %}

{% set config = {
  "withinQuestion": true,
  "summaries": [
    {
      "groups": [
        group_config
      ]
    }
  ]
} %}

{{ onsSummary(config) }}
